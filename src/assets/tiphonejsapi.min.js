function receiveMessage(e){var a=JSON.parse(e.data);switch(a.nombre){case"callback":if(a.identificadorCallback){var t=callbacks[a.identificadorCallback];t(a),delete callbacks[a.identificadorCallback]}break;case"paletaCargada":var n={nombre:"inicializar",dominioPadre:dominioPadre,alias:alias},i=JSON.stringify(n);objIframe=e.source,objIframe.postMessage(i,dominioHijo);break;case"inicializar":alias=a.alias,dominioPadre=a.dominioPadre,eventPaletaInicializada.detail.alias=alias,null!=alias&&document.dispatchEvent(eventPaletaInicializada);break;case"PaletaConectada":document.dispatchEvent(eventPaletaConectada);break;case"InboundCallData":eventLlamadaEntranteTiphone.detail.IdCall=a.IdLlamada,eventLlamadaEntranteTiphone.detail.CodeGroup=a.CodigoGrupo,eventLlamadaEntranteTiphone.detail.AliasGroup=a.AliasGrupo,eventLlamadaEntranteTiphone.detail.ANI=a.ANI,eventLlamadaEntranteTiphone.detail.DNIS=a.DNIS,eventLlamadaEntranteTiphone.detail.Channel=a.Channel,document.dispatchEvent(eventLlamadaEntranteTiphone);break;case"OutboundCallId":eventLlamadaSalienteTiphone.detail.IdCall=a.IdLlamada,document.dispatchEvent(eventLlamadaSalienteTiphone);break;case"RecordRequest":eventSolicitarRegistroTiphone.detail.IdCampana=a.IdCampana,eventSolicitarRegistroTiphone.detail.IdLista=a.IdLista,eventSolicitarRegistroTiphone.detail.Condicion=a.Condicion,eventSolicitarRegistroTiphone.detail.Grupo=a.Grupo,document.dispatchEvent(eventSolicitarRegistroTiphone);break;case"getSessionStatus":document.dispatchEvent(eventgetEstadoPaleta);break;case"RecordRequestResult":eventSolicitarRegistroResultTiphone.detail.result=a.resultado,document.dispatchEvent(eventSolicitarRegistroResultTiphone);break;case"PositionAndExtensionResult":eventPosicionYExtensionResult.detail.position=a.posicion,eventPosicionYExtensionResult.detail.extension=a.extension,document.dispatchEvent(eventPosicionYExtensionResult);break;case"VoiceRecordingFileName":eventNombreGrabacion.detail.fileName=a.nombreGrabacion,document.dispatchEvent(eventNombreGrabacion);break;case"VoiceRecordingFileNameAdditional":eventNombreGrabacionAdditional.detail.fileName=a.nombreGrabacion,document.dispatchEvent(eventNombreGrabacionAdditional);break;case"SessionStatus":eventEstadoPaleta.detail.status=a.estado,document.dispatchEvent(eventEstadoPaleta);break;case"StartRecording":document.dispatchEvent(eventIniciarGrabacion);break;case"StopRecording":document.dispatchEvent(eventDetenerGrabacion);break;case"EndRescheduling":eventFinalizarReproTiphone.detail.result=a.resultado,document.dispatchEvent(eventFinalizarReproTiphone);break;case"RecordEnded":eventFinalizarRegistroTiphone.detail.resultadonegocio=a.resultadonegocio,document.dispatchEvent(eventFinalizarRegistroTiphone);break;case"EndCall":if("hablando"==paleta.state&&"Hablando"==paleta.$.mainMenu.text&&"receipt"==paleta.$.mainMenu.$.button2.icon)document.dispatchEvent(eventEndCallTiphone);else{var o={nombre:"callback",error:!0,mensaje:"No se puede realizar el cuelgue de la llamada.",identificadorCallback:a.identificadorCallback},i=JSON.stringify(o);parent.postMessage(i,dominioPadre)}break;case"DialPhone":if(eventMarcarTelefonoTiphone.detail.telefono=a.telefono,1==objPaleta.usergeneralstatus){var o={nombre:"callback",error:!0,mensaje:"No puedes realizar una llamada desde disponible.",identificadorCallback:a.identificadorCallback},i=JSON.stringify(o);parent.postMessage(i,dominioPadre)}else document.dispatchEvent(eventMarcarTelefonoTiphone);break;case"DatosAlerting":eventDatosAlerting.detail.Diccionario=a.diccionario,eventDatosAlerting.detail.Grupo=a.grupo,eventDatosAlerting.detail.Phone=a.phone,eventDatosAlerting.detail.CallId=a.callid,document.dispatchEvent(eventDatosAlerting);break;case"PreviewCallData":eventRegistroPreviewTiphone.detail.IdCall=a.IdLlamada,eventRegistroPreviewTiphone.detail.IdCampaign=a.campana,eventRegistroPreviewTiphone.detail.IdList=a.lista,eventRegistroPreviewTiphone.detail.Operation=a.operacion,eventRegistroPreviewTiphone.detail.IdClient=a.idcliente,eventRegistroPreviewTiphone.detail.NameClient=a.nombrecliente,eventRegistroPreviewTiphone.detail.DatosRegistro=a.datosregistro,document.dispatchEvent(eventRegistroPreviewTiphone);break;case"PredictiveCallData":eventRegistroPredictivoTiphone.detail.IdCall=a.IdLlamada,eventRegistroPredictivoTiphone.detail.IdCampaign=a.campana,eventRegistroPredictivoTiphone.detail.IdList=a.lista,eventRegistroPredictivoTiphone.detail.Operation=a.operacion,eventRegistroPredictivoTiphone.detail.IdClient=a.idcliente,eventRegistroPredictivoTiphone.detail.NameClient=a.nombrecliente,eventRegistroPredictivoTiphone.detail.Phone=a.telefonomarcado,eventRegistroPredictivoTiphone.detail.DatosRegistro=a.datosregistro,document.dispatchEvent(eventRegistroPredictivoTiphone);break;case"SessionVisibility":eventPaletaVisibleTiphone.detail.visible=a.visible,document.dispatchEvent(eventPaletaVisibleTiphone);break;case"PreviewRecordRejected":document.dispatchEvent(eventPreviewRecordRejected);break;case"PreviewCallInConference":document.dispatchEvent(eventPreviewCallInConference);break;case"Reconnect":document.dispatchEvent(eventReconectarPaleta);break;case"StopPreviewTimer":document.dispatchEvent(eventPararPreview);break;case"ExpandirPaleta":document.dispatchEvent(eventExpandirPaleta);break;case"ContraerPaleta":eventContraerPaleta.detail.height=a.altura,document.dispatchEvent(eventContraerPaleta);break;case"ExpandirDial":document.dispatchEvent(eventExpandirDial);break;case"ExpandirSelector":document.dispatchEvent(eventExpandirSelector);break;case"ExpandirSegundaLlamada":eventExpandirSegundaLlamada.detail.height=a.height,document.dispatchEvent(eventExpandirSegundaLlamada);break;case"PaletaAlturaMinima":eventPaletaAlturaMinima.detail.height=a.altura,document.dispatchEvent(eventPaletaAlturaMinima);break;case"NoTypify":document.dispatchEvent(eventNoPermitirTipificacion);break;case"InfoMessage":eventInfoMessages.detail.message=a.message,document.dispatchEvent(eventInfoMessages);break;case"AdminWork":if(eventAdminWork.detail.telefono=a.telefono,"disponible"==paleta.state||"no-disponible"==paleta.state&&"No Disponible"==paleta.$.mainMenu.text)document.dispatchEvent(eventAdminWork);else{var o={nombre:"callback",error:!0,mensaje:"Pase a no disponible o a disponible para realizar una llamada",identificadorCallback:a.identificadorCallback},i=JSON.stringify(o);parent.postMessage(i,dominioPadre)}}}var objIframe,dominioPadre="*",dominioHijo="*",alias=null,callbacks={},tiphonejsapi=function(){var e=function(e,a,t){var n=""+Date.now()+Math.random();callbacks[n]=t,objIframe.postMessage(JSON.stringify({nombre:e,telefono:a,identificadorCallback:n}),"*")},a=function(e,a,t){var n=""+Date.now()+Math.random();callbacks[n]=t,objIframe.postMessage(JSON.stringify({nombre:e,telefono:a,identificadorCallback:n}),"*")},t=function(e,a){var t=""+Date.now()+Math.random();callbacks[t]=a,objIframe.postMessage(JSON.stringify({nombre:e,identificadorCallback:t}),"*")},n=function(e){var a=new Object;try{var t=localStorage.getItem("AliasOpTiphone");null==t?a.error=!0:(a.error=!1,a.alias=t)}catch(e){a.error=!0}void 0!=e&&e(a)},i=function(e){var a=new Object;try{var t=localStorage.getItem("CodExtenTiphone"),n=localStorage.getItem("posicion");null==n||null==t?a.error=!0:(a.error=!1,a.position=n,a.extension=t)}catch(e){a.error=!0}void 0!=e&&e(a)},o=function(e){var a={nombre:"getSessionStatus"},t=JSON.stringify(a),n=new Object;try{objIframe.postMessage(t,dominioHijo),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},r=function(e){var a={nombre:"StopPreviewTimer"},t=JSON.stringify(a),n=new Object;try{objIframe.postMessage(t,dominioHijo),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},d=function(e,a,t,n,i){var o={nombre:"RecordRequest",IdCampana:e,IdLista:a,Condicion:t,Grupo:n},r=JSON.stringify(o),d=new Object;try{objIframe.postMessage(r,dominioHijo),d.error=!1}catch(e){d.error=!0}void 0!=i&&i(d)},s=function(e,a){var t={nombre:"RecordRequestResult",resultado:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},l=function(e,a,t){var n={nombre:"PositionAndExtensionResult",posicion:e,extension:a},i=JSON.stringify(n),o=new Object;try{parent.postMessage(i,dominioPadre),o.error=!1}catch(e){o.error=!0}void 0!=t&&t(o)},c=function(e,a){var t={nombre:"SessionStatus",estado:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},v=function(e,a){var t={nombre:"VoiceRecordingFileName",nombreGrabacion:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},m=function(e,a){var t={nombre:"VoiceRecordingFileNameAdditional",nombreGrabacion:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},p=function(e,a){var t={nombre:"RecordEnded",resultadonegocio:e},n=JSON.stringify(t),i=new Object;try{objIframe.postMessage(n,dominioHijo),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},u=function(e){var a={nombre:"EndCall"};JSON.stringify(a),new Object;t("EndCall",e)},g=function(e){var a={nombre:"Reconnect"},t=JSON.stringify(a),n=new Object;try{parent.postMessage(t,dominioPadre),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},b=function(e){var a={nombre:"PreviewRecordRejected"},t=JSON.stringify(a),n=new Object;try{parent.postMessage(t,dominioPadre),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},h=function(e){var a={nombre:"PreviewCallInConference"},t=JSON.stringify(a),n=new Object;try{parent.postMessage(t,dominioPadre),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},f=function(e,a){var t={nombre:"EndRescheduling",resultado:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},P=function(a,t){var n={nombre:"DialPhone",telefono:a};JSON.stringify(n),new Object;e("DialPhone",a,t)},C=function(){var e={nombre:"PaletaConectada"},a=JSON.stringify(e);new Object;try{parent.postMessage(a,dominioPadre)}catch(e){}},E=function(e,a,t,n,i,o,r){var d={nombre:"InboundCallData",IdLlamada:e,CodigoGrupo:a,AliasGrupo:t,ANI:n,DNIS:i,Channel:o},s=JSON.stringify(d),l=new Object;try{parent.postMessage(s,dominioPadre),l.error=!1}catch(e){l.error=!0}void 0!=r&&r(l)},R=function(e,a){var t={nombre:"OutboundCallId",IdLlamada:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},w=function(e,a,t,n,i){var o={nombre:"DatosAlerting",diccionario:e,grupo:a,phone:t,callid:n},r=JSON.stringify(o),d=new Object;try{parent.postMessage(r,dominioPadre),d.error=!1}catch(e){d.error=!0}void 0!=i&&i(d)},S=function(e,a,t,n,i,o,r,d){var s={nombre:"PreviewCallData",IdLlamada:e,campana:a,lista:t,operacion:n,idcliente:i,nombrecliente:o,datosregistro:r},l=JSON.stringify(s),c=new Object;try{parent.postMessage(l,dominioPadre),c.error=!1}catch(e){c.error=!0}void 0!=d&&d(c)},I=function(e,a,t,n,i,o,r,d,s){var l={nombre:"PredictiveCallData",IdLlamada:e,campana:a,lista:t,operacion:n,idcliente:i,nombrecliente:o,telefonomarcado:r,datosregistro:d},c=JSON.stringify(l),v=new Object;try{parent.postMessage(c,dominioPadre),v.error=!1}catch(e){v.error=!0}void 0!=s&&s(v)},O=function(e,a){var t={nombre:"SessionVisibility",visible:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},y=function(e,a){document.addEventListener(e,a,!1)},N=function(e,a,t,n,i){objIframe=e,dominioHijo=t,alias=n},T=function(){var e={nombre:"paletaCargada"},a=JSON.stringify(e);parent.postMessage(a,"*")},k=function(e){var a={nombre:"ExpandirPaleta"},t=JSON.stringify(a),n=new Object;try{parent.postMessage(t,dominioPadre),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},j=function(e,a){var t={nombre:"ContraerPaleta",altura:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},M=function(e){var a={nombre:"ExpandirDial"},t=JSON.stringify(a),n=new Object;try{parent.postMessage(t,dominioPadre),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},D=function(e){var a={nombre:"ExpandirSelector"},t=JSON.stringify(a),n=new Object;try{parent.postMessage(t,dominioPadre),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},A=function(e,a){var t={nombre:"ExpandirSegundaLlamada",height:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},x=function(e,a){var t={nombre:"PaletaAlturaMinima",altura:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},J=function(e){var a={nombre:"NoTypify"},t=JSON.stringify(a),n=new Object;try{objIframe.postMessage(t,dominioHijo),n.error=!1}catch(e){n.error=!0}void 0!=e&&e(n)},L=function(e,a){var t={nombre:"InfoMessage",message:e},n=JSON.stringify(t),i=new Object;try{parent.postMessage(n,dominioPadre),i.error=!1}catch(e){i.error=!0}void 0!=a&&a(i)},G=function(e,t){var n={nombre:"AdminWork",telefono:e};JSON.stringify(n),new Object;a("AdminWork",e,t)};return{getAlias:n,getPositionAndExtension:i,getSessionStatus:o,StopPreviewTimer:r,RecordRequest:d,RecordRequestResult:s,PositionAndExtensionResult:l,SessionStatus:c,VoiceRecordingFileName:v,VoiceRecordingFileNameAdditional:m,RecordEnded:p,Reconnect:g,PreviewRecordRejected:b,PreviewCallInConference:h,EndRescheduling:f,DialPhone:P,InboundCallData:E,PreviewCallData:S,PredictiveCallData:I,SessionVisibility:O,addEventListener:y,inicializar:N,paletaCargada:T,ExpandirPaleta:k,ContraerPaleta:j,ExpandirDial:M,ExpandirSelector:D,ExpandirSegundaLlamada:A,PaletaAlturaMinima:x,NoTypify:J,InfoMessage:L,AdminWork:G,DatosAlerting:w,EndCall:u,PaletaConectada:C,OutboundCallId:R}}(),eventgetEstadoPaleta=new CustomEvent("onGetSessionStatus"),eventPreviewRecordRejected=new CustomEvent("onPreviewRecordRejected"),eventPreviewCallInConference=new CustomEvent("onPreviewCallInConference"),eventPaletaAlturaMinima=new CustomEvent("onPluginHeight",{detail:{height:""}}),eventEstadoPaleta=new CustomEvent("onSessionStatus",{detail:{status:""}}),eventSolicitarRegistroTiphone=new CustomEvent("onRecordRequest",{detail:{IdCampana:"",IdLista:"",Condicion:"",Grupo:""}}),eventEndCallTiphone=new CustomEvent("onEndCall",{detail:{}}),eventFinalizarRegistroTiphone=new CustomEvent("onEndRecord",{detail:{resultadonegocio:""}}),eventMarcarTelefonoTiphone=new CustomEvent("onDialPhone",{detail:{telefono:""}}),eventLlamadaEntranteTiphone=new CustomEvent("onInboundCallData",{detail:{IdCall:"",CodeGroup:"",AliasGroup:"",ANI:"",DNIS:"",Channel:""}}),eventLlamadaSalienteTiphone=new CustomEvent("onOutboundCallId",{detail:{IdCall:""}}),eventPaletaConectada=new CustomEvent("onPaletaConectada",{}),eventDatosAlerting=new CustomEvent("onDatosAlerting",{detail:{Diccionario:"",Grupo:"",Phone:"",CallId:""}}),eventRegistroPreviewTiphone=new CustomEvent("onPreviewCallData",{detail:{IdCall:"",IdCampaign:"",IdList:"",Operation:"",IdClient:"",NameClient:"",DatosRegistro:""}}),eventRegistroPredictivoTiphone=new CustomEvent("onPredictiveCallData",{detail:{IdCall:"",IdCampaign:"",IdList:"",Operation:"",IdClient:"",NameClient:"",Phone:"",DatosRegistro:""}}),eventPaletaVisibleTiphone=new CustomEvent("onPluginVisibility",{detail:{visible:""}}),eventSolicitarRegistroResultTiphone=new CustomEvent("onRecordRequestResult",{detail:{result:""}}),eventPaletaInicializada=new CustomEvent("onPaletaInicializada",{detail:{alias:"",resultado:""}}),eventFinalizarReproTiphone=new CustomEvent("onReschedulingEnded",{detail:{result:""}}),eventReconectarPaleta=new CustomEvent("onReconnect"),eventNombreGrabacion=new CustomEvent("onVoiceRecordingFileName",{detail:{fileName:""}}),eventNombreGrabacionAdditional=new CustomEvent("onVoiceRecordingFileNameAdditional",{detail:{fileName:""}}),eventIniciarGrabacion=new CustomEvent("onStartRecording"),eventDetenerGrabacion=new CustomEvent("onStopRecording"),eventPosicionYExtensionResult=new CustomEvent("onPositionAndExtension",{detail:{position:"",extension:""}}),eventPararPreview=new CustomEvent("onStopPreviewTimer"),eventExpandirPaleta=new CustomEvent("onExpandPlugin"),eventContraerPaleta=new CustomEvent("onCollapsePlugin",{detail:{height:""}}),eventExpandirDial=new CustomEvent("onExpandDial"),eventExpandirSelector=new CustomEvent("onExpandSelector"),eventExpandirSegundaLlamada=new CustomEvent("onExpandAdditionalCall",{detail:{height:""}}),eventNoPermitirTipificacion=new CustomEvent("onNoTypify"),eventInfoMessages=new CustomEvent("onInfoMessages",{detail:{message:""}}),eventAdminWork=new CustomEvent("onAdminWork",{detail:{telefono:""}});window.addEventListener("message",receiveMessage,!1);